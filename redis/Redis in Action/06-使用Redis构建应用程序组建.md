#### 使用 Redis构建锁
SETNX 只会在键不存在的情况下为键设置值，而锁要做的就是将一个随机生成的128位 UUID设置为键的值，并使用这个值来防止锁被其他进程取得。

`if pipe.get(lockname) == identifier ......` 释放锁之前进行判断，检查进程是否仍然持有锁，也防止释放别人的锁。

#### 带有超时限制的锁
调用 EXPIRE命令来为锁设置过期时间。

