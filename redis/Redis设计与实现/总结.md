## 字典
hash表负载因子 = 哈希表已保存节点数量 / 哈希表大小  
load_factor = ht[0].used / ht[0].size

#### 哈希表的扩展与收缩
1. 扩展与收缩条件
2. 按照 rehashidx 进行渐进式 rehash（字典包含两个 hash表 ht[0] 和 ht[1]，用于复制，类似于cluster槽从一个节点的转移到另一个）
3. 渐进式 rehash执行期间的哈希表操作

## 对象
1. 对象的内部结构
2. 引用计数内存回收
3. 引用计数实现多数据库键共享同一对象，节约内存
4. 对象带有访问时间记录信息，记录空转时间，超过maxmemory时，释放空转时间长的键

#### 字符串对象
* 编码
  1. int - 保存的是整数值，且可以用 long类型来表示
  2. raw - 保存的是一个字符串值，且长度大于 39字节，使用SDS来保存这个字符串
  3. embstr - 保存的是一个字符串值，且长度小于等于 39字节，embstr是专门用于保存短字符的一种优化编码方式
* embstr 优点




## 选举领头
### 选举领头 Sentinel(Raft算法的领头选举)
### Cluster 选举新的主节点(Raft算法的领头选举)

## 故障转移
### Sentinel故障转移
##### 选出新的主服务器
1. 从服务器优先级
2. 偏移量(偏移量最大的保存着最新的数据)
3. 运行ID 最小的服务器
### Cluster故障转移


