工厂模式包括简单工厂，工厂方法和抽象工厂模式

### 简单工厂模式
简单工厂是对 new 对象的简单封装，在外层包了一个工厂，根据输入类型的不同，创建不同的类。

比如说要生产 Pizza，有 A,B 两种类型的 Pizza，开始的写法可能是这样：

```
public static void main(String[] args) {
  //想生产一个哪种 pizza就 new哪个
  APizza aPizza = new APizza();
  BPizza bPizza = new BPizza();
}
```

这样写你得必须知道 APizza 和 BPizza 这两个类，并且如果新增了一个 CPizza也得及时了解。最容易想到的改进就是简单工厂模式，即利用一个类型参数来控制，输入 A 就给你生产 APizza，输入 B 就给你生产 BPizza。这就需要对 A,B 两种类型的 pizza 进行抽象，抽象出一个 Pizza 接口。

```
public class SimplePizzaFactory {
    public Pizza createPizza(String type) {
        if("A".equals(type)) {
            return new APizza();
        } else if("B".equals(type)) {
            return new BPizza();
        } else {
            return null;
        }
    }
}
```
```
public static void main(String[] args) {
    SimplePizzaFactory factory = new SimplePizzaFactory();
    Pizza aPizza = factory.createPizza("A");
    Pizza bPizza = factory.createPizza("B");
}
```

### 工厂方法
这个时候已经可以满足了根据类型很容易的得到对应的 pizza。如果永远只有这两种pizza是没有问题的，再新增一个 C pizza 的时候，问题出现了。现在增加一个 C pizza。首先得加一个 CPizza 的类，实现 Pizza 的接口。然后**修改**SimplePizzaFactory类，增加一个 else if。

```
public class SimplePizzaFactory {
    public Pizza createPizza(String type) {
        if("A".equals(type)) {
            return new APizza();
        } else if("B".equals(type)) {
            return new BPizza();
        } else if("C".equals(type)) {
            return new CPizza();
        } else {
            return null;
        }
    }
}
```
这样一来，每增加一个种类就要修改 SimplePizzaFactory类 类，加一个 else if。违反了开闭原则(*对扩展开放，对修改关闭：一旦完成，一个类的实现只应该因错误而修改，新的或者改变的特性应该通过新建不同的类实现*)。再改，不是说不能改现有的类，只能靠新增类来实现么，那就继续抽象。简单工厂对 pizza进行了抽象，现在之所以每次都要改 SimplePizzaFactory 类就是因为我们只有这一个工厂阿，想想现实中的工厂，如果不发生改变也不可能凭空生产出个新产品阿。那如果又想加新产品，又不想改现有代码，要通过新增类来实现，那思路有了，每个产品搞个工厂不就行了，你想生产 CPizza，我就建个 C 工厂，你再想生产 DPizza 我就再建一个D 工厂。现在对工厂进行抽象，加一个工厂接口。

```
public interface PizzaFactory {
    public Pizza createPizza();
}
```
再创建 A,B两个工厂实现 PizzaFactory接口。这个时候生产 A,B pizza就变成了：
```
public static void main(String[] args) {
    PizzaFactory aPizzaFactory = new APizzaFactory();
    aPizzaFactory.createPizza();

    PizzaFactory bPizzaFactory = new BPizzaFactory();
    bPizzaFactory.createPizza();
}
```



区别： 工厂方法模式只有一个抽象产品类，而抽象工厂模式有多个。工厂方法模式的具体工厂类只能创建一个具体产品类的实例，而抽象工厂模式可以创建多个。

#### 引用
* [设计模式之三种工厂模式](https://www.cnblogs.com/LUO77/p/5785906.html)

